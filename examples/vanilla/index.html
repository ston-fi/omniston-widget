<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://static.ston.fi/favicon/favicon.ico"
    />
    <title>Widget in Vanilla app</title>
    <style>
      body {
        min-height: 100vh;
        padding: 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        gap: 2rem;
      }

      h1 {
        text-align: center;
      }

      #btn-container {
        display: flex;
        width: 100%;
        justify-content: center;
        gap: 8px;
      }

      #btn-create-widget,
      #btn-destroy-widget {
        padding: 0.5rem 1rem;
        border: none;
        cursor: pointer;
      }

      #omniston-widget-container {
        max-width: min(500px, calc(100vw - 2 * 2rem));
      }
    </style>
    <script src="https://swap.ston.fi/widget/v0/index.js"></script>
  </head>
  <body>
    <h1>Ston.fi Omniston Widget</h1>

    <section id="btn-container">
      <button id="btn-create-widget">Create Widget</button>
      <button id="btn-destroy-widget">Destroy Widget</button>
    </section>

    <div id="omniston-widget-container"></div>

    <script type="module">
      const widgetContainer = document.querySelector("#omniston-widget-container");

      const widget = new window.OmnistonWidget({
        tonconnect: {
          type: "standalone",
          options: {
            manifestUrl: "https://<YOUR_APP_URL>/tonconnect-manifest.json",
          },
        },
        widget: {
          defaultBidAsset: "EQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAM9c",
          defaultAskAsset: "EQA2kCVNwVsil2EM2mB0SkXytxCqQjS4mttjDpnXmwG9T6bO",
          customAssets: ["EQCWFe9TTbe-1oQMR0FtOprIibHEpftpqkRGFZoq8mBl6cNk"],
        },
      });

      widget.on("mount", () => console.log("widget mounted"));
      widget.on("unmount", () => console.log("widget unmounted"));
      widget.on("error", (error) => console.error(error));

      widget.mount(widgetContainer);

      const btnCreate = document.querySelector("#btn-create-widget");

      btnCreate.onclick = () => widget.mount(widgetContainer);

      const btnDestroy = document.querySelector("#btn-destroy-widget");

      btnDestroy.onclick = () => widget.unmount();
    </script>
  </body>
</html>
